---
title: "An Analysis of Motor Vehicle Theft in Toronto: Patterns and Trends (2020-2024)"
author: 
  - Xinze Wu

thanks: "Code and data are available at: https://github.com/ke3w/term_paper1"
date: 2024/09/24
date-format: long
abstract: "This paper explores patterns of motor vehicle theft in Toronto between 2020 and 2024 using data from Open Data Toronto. The analysis reveals a significant correlation between location type and the frequency of thefts, with parking lots being the most common theft sites. This study shows how public data can inform targeted strategies to prevent motor vehicle theft."
format: pdf
number-sections: true
bibliography: references.bib
execute:
  echo: true
  eval: true
  cache: true
  cache.lazy: false
  global: true
---

```{r}
#| include: false
#| warning: false
#| message: false
#| 

library(tidyverse)
library(palmerpenguins)
```

# Introduction

Motor vehicle theft is getting more and more serious across Great Toronto Area. This phenomenon damages the safety of the citizens’ personal property, and it has increased the price of vehicle insurance to a certain extent and increased the financial pressure on residents. Therefore, understanding the patterns and trends behind such thefts can help law enforcement and policymakers implement preventive measures.

The availability of Open Data Toronto provides a valuable resource for analyzing crime trends. This paper uses data from Open Data Toronto on thefts from motor vehicles to identify key factors that contribute to these incidents.

The reminder of this paper is constructed as follows: \@#sec-data: Describe data sources and simulation process \@#sec-model: Visualize the data to have a better Readability \@#sec-result: Provide a comprehensive description and summary of the data. \@#sec-diss: Express personal thinking on the result

# Data {#sec-data}

The data used in this analysis was sourced from Open Data Toronto. Specifically, the dataset focuses on reported incidents of motor vehicle theft in Toronto from 2020 to 2024. As for the key variables in the dataset, REPORT_DATE: The date on which the theft was officially reported.

OCC_DATE: The date on which the theft occurred.

LOCATION_TYPE: Describes the type of location where the vehicle was stolen (e.g., "Parking Lot", "Street").

PREMISES_TYPE: Indicates whether the theft occurred inside or outside (e.g., "Outside", "House").

OFFENCE: A categorical variable that describes the type of offense (e.g., "Theft From Motor Vehicle Under").

DIVISION: Represents the police division that handled the report.

HOOD_158: Represents the neighborhood where the incident occurred.

Shown as the diagram (@fig-year), the number of reported incidents of motor theft is relatively close every year. As for 2024, the total number is approximately half of the other year’s since the dataset used in this paper only up to June 2024. The relationship between the number of cases and year indicates that there is not a strong connection between these two variables. The number of incidents is likely not to be affect by any certain year.

```{r}
#| label: fig-year
#| fig-cap: Motor Vehicle Thefts by Year
#| echo: false
#| warning: false
#| message: false
#| error: false  # Hides errors, warnings, and messages


library(ggplot2)
theft_data <- read_csv("/Users/wuxinze/Desktop/theft1/data/raw_data/theft_raw_data.csv")
ggplot(theft_data, aes(x = factor(REPORT_YEAR))) +
  geom_bar(fill = "steelblue", color = "black") +
  labs(title = "Motor Vehicle Thefts by Year", 
       x = "Year", 
       y = "Count") +
  theme_minimal() + 
  theme(
    plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 12), 
    axis.text.y = element_text(size = 12),
    axis.title = element_text(size = 14),
  )


```

One of the most critical independent variable in this dataset is location, the following diagram shows the number of incidents in the top 5 locations where car thefts are most likely to occur, shown as (@fig-location).

```{r}
#| label: fig-location
#| fig-cap: Motor Vehicle Thefts by Key Location Types(Top 5)
#| echo: false
#| warning: false
#| message: false


library(ggplot2)
library(dplyr)
top_location_types <- theft_data %>%
  group_by(LOCATION_TYPE) %>%
  summarise(count = n()) %>%
  top_n(5, wt = count) %>%
  pull(LOCATION_TYPE)
filtered_theft_data <- theft_data %>%
  filter(LOCATION_TYPE %in% top_location_types)
ggplot(filtered_theft_data, aes(x = LOCATION_TYPE)) +
  geom_bar(fill = "darkorange", color = "black") +
  labs(title = "Motor Vehicle Thefts by Key Location Types", 
       x = "Location Type", 
       y = "Count") +
  theme_minimal() +
  theme(
    plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 6),
    axis.text.y = element_text(size = 12),
    axis.title = element_text(size = 14)
  )

```

# Model {#sec-model}

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.

### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

# Results {#sec-result}

Our results are summarized in @tbl-modelresults.

# Discussion {#sec-diss}

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {.unnumbered}

# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows...

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

\newpage

# References
